<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absen Makan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 1. FIWA COLOR PALETTE --- */
        :root {
            --bg-light: #F5FBFE;
            --white: #FFFFFF;
            --yellow: #F3B719;
            --blue-mid: #1576BB;
            --blue-dark: #044E85;
            --text-grey: #666666;
            --error-red: #ff4444;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            height: 100vh;
            overflow: hidden;
        }

        /* =========================================
           ðŸš€ SECTION 1: LANDING PAGE (LOGIN)
           ========================================= */
        #landing-page {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, var(--blue-mid), var(--blue-dark));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999; /* Always on top */
            transition: opacity 0.5s ease;
        }

        .login-card {
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            text-align: center;
        }

        .login-logo {
            font-size: 50px;
            color: var(--yellow);
            margin-bottom: 10px;
        }

        .login-title {
            color: var(--blue-dark);
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 700;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-label {
            display: block;
            color: var(--text-grey);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .login-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
        }

        .login-input:focus {
            border-color: var(--blue-mid);
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--blue-mid);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .login-btn:hover {
            background-color: var(--blue-dark);
        }

        .error-msg {
            color: var(--error-red);
            font-size: 14px;
            margin-top: 10px;
            display: none; /* Hidden by default */
        }

        /* =========================================
           ðŸš€ SECTION 2: DASHBOARD (Hidden initially)
           ========================================= */
        #app-container {
            display: none; /* Hidden until login */
            width: 100%;
            height: 100%;
            display: flex; /* Will be toggled to flex */
        }

        /* ... (Previous Dashboard CSS) ... */
        .sidebar {
            width: 250px;
            background-color: var(--white);
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0,0,0,0.05);
            z-index: 10;
        }

        .logo-area {
            font-size: 24px;
            font-weight: 800;
            color: var(--blue-dark);
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links { display: flex; flex-direction: column; gap: 10px; flex: 1; }

        .nav-item {
            display: flex; align-items: center; gap: 15px;
            padding: 12px 15px; color: var(--text-grey);
            text-decoration: none; border-radius: 10px;
            transition: 0.3s; cursor: pointer;
        }

        .nav-item:hover { background-color: var(--bg-light); color: var(--blue-mid); }
        .nav-item.active { background-color: var(--blue-dark); color: var(--white); box-shadow: 0 4px 10px rgba(4, 78, 133, 0.3); }

        .main-content {
            flex: 1; display: flex; flex-direction: column; position: relative;
        }

        .top-header {
            height: 70px; display: flex; justify-content: flex-end;
            align-items: center; padding: 0 30px;
        }

        .user-profile { display: flex; align-items: center; gap: 12px; }
        .user-name { font-weight: 600; color: var(--blue-dark); font-size: 16px; }
        .user-avatar {
            width: 40px; height: 40px; background-color: var(--blue-mid);
            color: white; border-radius: 50%; display: flex;
            justify-content: center; align-items: center; font-size: 18px;
        }

        .page-container { padding: 30px; overflow-y: auto; height: 100%; }

        .dashboard-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }

        .stat-card {
            background: var(--white); padding: 25px; border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02); border-left: 5px solid var(--yellow);
        }

        .stat-title { color: var(--text-grey); font-size: 14px; margin-bottom: 5px; }
        .stat-value { color: var(--blue-dark); font-size: 28px; font-weight: bold; }

        /* Helper to hide things */
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="landing-page">
        <div class="login-card">
            <div class="login-logo">
                <i class="fa-solid fa-utensils"></i>
            </div>
            <h2 class="login-title">Login Absen Makan</h2>
            
            <div class="input-group">
                <label class="input-label">Student ID (RFID)</label>
                <input type="text" id="student-id-input" class="login-input" placeholder="e.g. 200912..." onkeypress="handleEnter(event)">
            </div>

            <button class="login-btn" onclick="attemptLogin()">Enter System</button>
            <div id="login-error" class="error-msg">ID not found! Please try again.</div>
            
            <p style="margin-top: 15px; font-size: 12px; color: #999;">
                Use <b>admin</b> or your RFID number
            </p>
        </div>
    </div>

    <div id="app-container" class="hidden">
        
        <nav class="sidebar">
            <div class="logo-area">
                <i class="fa-solid fa-utensils" style="color: var(--yellow);"></i>
                Absen Makan
            </div>

            <div class="nav-links">
                <a href="#" class="nav-item active" onclick="switchTab('dashboard')">
                    <i class="fa-solid fa-chart-pie"></i> Dashboard
                </a>
                <a href="#" class="nav-item" onclick="switchTab('activity')">
                    <i class="fa-solid fa-clock-rotate-left"></i> My Activity
                </a>
                <a href="#" class="nav-item" onclick="switchTab('leaderboard')">
                    <i class="fa-solid fa-trophy"></i> Leaderboard
                </a>
            </div>

            <a href="#" class="nav-item" onclick="logout()" style="margin-top: auto; color: #ff4444;">
                <i class="fa-solid fa-right-from-bracket"></i> Logout
            </a>
        </nav>

        <main class="main-content">
            <header class="top-header">
                <div class="user-profile">
                    <span class="user-name" id="display-name">Guest</span>
                    <div class="user-avatar">
                        <i class="fa-solid fa-user"></i>
                    </div>
                </div>
            </header>

            <div class="page-container">
                <h2 style="margin-bottom: 20px; color: var(--blue-dark);">Dashboard Overview</h2>
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-title">Total Meals</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-card" style="border-color: var(--blue-mid);">
                        <div class="stat-title">Avg. Breakfast Time</div>
                        <div class="stat-value">--:--</div>
                    </div>
                    <div class="stat-card" style="border-color: var(--blue-dark);">
                        <div class="stat-title">Current Rank</div>
                        <div class="stat-value">#--</div>
                    </div>
                </div>
                <div style="background: white; padding: 30px; border-radius: 15px; height: 300px; display: flex; justify-content: center; align-items: center; color: #ccc;">
                    Chart Coming Soon...
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- 1. THE STUDENT DATABASE (Phase 3 Prep) ---
        // You said you will pair IDs yourself. Add them here!
        const STUDENT_DB = {
            "2009120396": "Aldebaran",
            "12345": "Test Student",
            "admin": "Admin User"
        };

        // --- 2. LOGIN LOGIC ---
        function attemptLogin() {
            const inputId = document.getElementById('student-id-input').value.trim();
            const errorMsg = document.getElementById('login-error');
            
            // Check if ID exists in our "Manual Database"
            if (STUDENT_DB[inputId]) {
                // Success!
                const studentName = STUDENT_DB[inputId];
                
                // 1. Update the UI Name
                document.getElementById('display-name').innerText = studentName;
                
                // 2. Hide Landing, Show App
                document.getElementById('landing-page').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('landing-page').classList.add('hidden');
                    document.getElementById('app-container').classList.remove('hidden');
                }, 500); // wait for animation
                
                // 3. Clear error
                errorMsg.style.display = 'none';

                // (Later: This is where we will trigger fetching THEIR specific data)
                console.log("Logged in as: " + studentName);

            } else {
                // Fail
                errorMsg.style.display = 'block';
                // Shake animation (optional visual flair)
                document.querySelector('.login-card').style.animation = "shake 0.3s";
                setTimeout(() => document.querySelector('.login-card').style.animation = "", 300);
            }
        }

        // Allow pressing "Enter" key
        function handleEnter(e) {
            if (e.key === 'Enter') attemptLogin();
        }

        function logout() {
            // Simply reload page to reset
            location.reload();
        }

        // --- UI LOGIC ---
        function switchTab(tabName) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }
    </script>
    
    <style>
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }
    </style>
</body>
</html>